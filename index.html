<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Horas Extras</title>

    <!-- Enlace al archivo CSS principal -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Configuración del Manifiesto de la PWA -->
    <link rel="manifest" href="manifest.json">

    <!-- Configuración de metadatos para "añadir a pantalla de inicio" (iOS / Android) -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Horas Extras">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">

    <!-- Theme color para la barra de dirección del navegador -->
    <meta name="theme-color" content="#2196F3"/>
</head>
<body>
    <header>
        <h1>Control y Reporte de Horas Extras</h1>
    </header>

    <main>
        <section id="register-section">
            <h2>Registrar Novedad</h2>
            <form id="horas-extras-form">
                <div class="form-group">
                    <label for="quienRegistra">¿QUIÉN REGISTRA LA NOVEDAD?</label>
                    <select id="quienRegistra" required>
                        <option value="">Seleccione...</option>
                        <!-- Opciones se cargarán dinámicamente desde app.js -->
                    </select>
                </div>

                <!-- CAMPO DE BÚSQUEDA PRINCIPAL: APELLIDOS Y NOMBRES -->
                <div class="form-group">
                    <label for="apellidosNombresInputSearch">APELLIDOS Y NOMBRES</label>
                    <input type="text" id="apellidosNombresInputSearch" list="nombres-list" placeholder="Empieza a escribir los Apellidos y Nombres del trabajador..." required>
                    <datalist id="nombres-list"></datalist>
                </div>

                <!-- CAMPOS QUE SE AUTOGENERAN -->
                <div class="form-group">
                    <label for="dniCe">DNI/CE</label>
                    <input type="text" id="dniCe" readonly>
                </div>

                <div class="form-group">
                    <label for="codigo">CÓDIGO</label>
                    <input type="text" id="codigo" readonly>
                </div>

                <div class="form-group">
                    <label for="puesto">PUESTO</label>
                    <input type="text" id="puesto" readonly>
                </div>

                <!-- CAMPOS DE FECHA Y HORA -->
                <div class="form-group">
                    <label for="fechaIngreso">FECHA DE INGRESO (Inicio de la hora extra)</label>
                    <input type="date" id="fechaIngreso" required>
                </div>

                <div class="form-group">
                    <label for="ingreso">HORA DE INGRESO</label>
                    <input type="time" id="ingreso" required>
                </div>

                <div class="form-group">
                    <label for="fechaSalida">FECHA DE SALIDA (Fin de la hora extra)</label>
                    <input type="date" id="fechaSalida" required>
                </div>

                <div class="form-group">
                    <label for="salida">HORA DE SALIDA</label>
                    <input type="time" id="salida" required>
                </div>

                <div class="form-group">
                    <label for="observacion">OBSERVACIÓN (Opcional)</label>
                    <textarea id="observacion" rows="3" placeholder="Detalles adicionales sobre la novedad..."></textarea>
                </div>

                <button type="submit">Registrar Novedad</button>
            </form>
        </section>

        <section id="report-section">
            <h2>Reporte de Horas Extras</h2>
            <div class="table-container">
                <table id="horas-extras-table">
                    <thead>
                        <tr>
                            <th>Quién Registra</th>
                            <th>DNI/CE</th>
                            <th>Apellidos y Nombres</th>
                            <th>Código</th>
                            <th>Puesto</th>
                            <th>Fecha Ingreso</th>
                            <th>Hora Ingreso</th>
                            <th>Fecha Salida</th>
                            <th>Hora Salida</th>
                            <th>Observación</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Los registros se insertarán aquí por JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="button-group">
                <!-- Cambiamos el texto del botón para reflejar que es un Excel -->
                <button id="descargarHorasExtrasBtn">Descargar Informe Excel</button>
                <button id="borrarRegistrosBtn" class="reset-button">Borrar Todos los Registros</button>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 App Horas Extras</p>
    </footer>

    <!-- Script de la librería SheetJS para generar Excel (xlsx) -->
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <!-- Enlace a los archivos JavaScript de tu aplicación -->
    <script type="module" src="js/helpers.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>